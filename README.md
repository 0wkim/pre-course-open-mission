# 🏷️ 우리말 초성 퀴즈

<br />

## 목차
1. [미션 개요](#미션-개요)
2. [목표](#목표)
3. [실행 방법](#실행-방법)
4. [프로젝트 폴더 구조](#프로젝트-폴더-구조)
5. [기능 상세](#기능-상세)
6. [RunningService 로직 설명](#RunningService-로직-설명)
7. [예외처리 상세](#예외처리-상세)
8. [테스트 상세](#테스트-상세)

<br />

## 미션 개요
구현한 미션 이름 : 🏷️우리말 초성 퀴즈

<br />

< 핵심 기능 >   
1) 두 자리의 랜덤한 초성 조합 생성    

2) 해당 제시어(초성)를 제공하고, 사용자의 정답 입력 대기  

3) 30초의 시간 제한  

4) 10초 지나면 첫번째 힌트 제공   

5) 20초 지나면 두번째 힌트 제공  

6) 사용자가 입력한 단어가 실제 국어사전(우리말샘)에 존재하면 정답 처리, 존재하지 않으면 오답 처리

<br />

##  목표
1. Class 및 기능 분리에 익숙해지기
    - 기존 미션에서 진행하던 클래스 및 기능 분리를 더 공부하며, MVC 패턴에 대한 설계 이해도를 높인다. 

2. static 키워드 활용해보기
    - 정적 메소드의 개념을 이해하고, 실제로 적용해 본다.

3. 비동기(async/await) 처리 이해
    - 네트워크 요청 흐름과 await 동작 원리를 이해한다.

4. 비동기를 활용한 API 연동
    - AI의 도움 없이 비동기 처리에 대한 이해를 바탕으로 API를 호출해본다. 

5. 테스트 코드의 구조적 개선 
    - 직전 미션에서는 test 코드를 작성하기 위해 클래스 내부 메소드의 #private 키워드를 수정했었다. 다만, 피드백을 통해 이 방식이 좋지 않다는 것을 깨달았고, 본 미션에서는 내부 메소드의 키워드 수정 없이 test 코드를 작성하도록 한다.

6. 자바스크립트 언어에 대한 추가적인 이해 
    - 사용해본적 없는 다른 언어를 활용해서 기존 미션을 재진행하는 것도 생각해봤지만 자바스크립트에 대한 이해도가 아직 높지 않기 때문에, 이번 미션에서는 자바스크립트에 대한 이해도를 더 높이는 것을 목표로 한다.

<br />

## 실행 방법
```
npm install
npm start
```

<br />

## 프로젝트 폴더 구조
```
src
├── constants/             
│   ├── apiConstants.js
|   ├── ErrorMessages.js
│   └── quizMessages.js
│
├── controller/              
│   └── InitialQuizController.js
│
├── model/                  
│   └── InitialQuizModel.js
│
├── service/                 
│   └── RunningService.js
│
├── utils/                 
│   ├── api.js
│   ├── checkCategory.js
│   ├── regExp.js
│   └── timer.js
│
├── validation/           
│   └── validateWordFindTimeout.js
│
└── view/                   
    ├── FinishQuizView.js
    ├── RunningQuizView.js
    └── StartQuizView.js
```

<br />

📁 InitialQuizModel.js
- 초성 제시어 추출
- 힌트1, 힌트2 제작 
- 정답 확인
- 제시어 정보 전달 

📁 startQuizView.js
- 제시어(초성) 출력

📁 RunningQuizView.js
- 게임 진행
- 힌트 출력 

📁 FinishQuizView.js
- 정답 여부 출력
- 제시어/정답에 대한 정보 출력 

📁 InitialQuizController.js
- 사용자 정답 입력
- 게임 흐름 제어 

<br />

## 기능 상세
1. 두 글자 랜덤 초성(제시어) 생성

    - 두 글자 랜덤 단어를 "우리말샘" API로부터 받아와, 유니코드를 사용하여 해당 단어의 초성만 추출해 제시어로 활용한다.

    - 랜덤 단어는 아래와 같은 시스템으로 선정한다.

        ```
        1. 모든 조합의 한글 음절 중에서, 하나의 음절 선택
        2. 해당 음절로 시작하는 단어가 API에 존재할때까지 반복
        3. API로 받아온 목록에서 단어가 여러개인 경우, 랜덤 인덱스를 통해 한 단어만 저장 
        4. 만약 두 글자가 아닌 경우, 위의 과정 반복 
        ```

<br />

2. 게임 시작 안내 및 제시어 출력

    - 제시어 제작 로딩 시 "제시어를 선정중입니다! 조금만 더 기다려 주세요..." 메시지 출력 

    - 제시어 생성이 완료되면 초성을 출력한다.

    - 만약 제시어 제작 로딩이 3분을 초과할 경우, 재탐색한다.

<br />

3. 30초 제한 타이머 실행

    - 사용자가 단어를 입력할 수 있는 제한 시간은 총 30초이다.

    - 시간이 종료되면 자동으로 입력을 마감한다.

<br />

4. 힌트 제공 시스템

    - 게임 시작 후 10초가 지나도 사용자 입력이 넘어오지 않으면, 첫번째 힌트를 제공한다.

        ```
        첫번째 힌트 : 제시어의 첫 글자
        ```

    - 20초가 지나도 입력이 넘어오지 않으면, 두번째 힌트를 제공한다.

        ```
        두번째 힌트 : 제시어의 국어사전(우리말샘) API 기준 정의(뜻)
        ```

<br />

5. 사용자 입력 처리
    
    - Controller에서 사용자의 입력을 받는다.

    - 아무것도 입력하지 않으면, 다시 입력을 요청한다. 

    - 이외의 예외항목은 모두 **실패**라는 게임 결과에 해당하므로, 생략한다. 

<br />

6. 국어사전(우리말샘) 기반 정답 검증 
    
    - 사용자가 입력한 단어가 실제 존재하는 단어인지 국어사전(우리말샘) API를 통해 확인한다.

    - 정답의 기준은 다음과 같다.

        ```
        입력된 단어가 API에 존재
        ```

    - 오답의 기준은 다음과 같다.

        ```
        1. 입력된 단어가 API에 존재하지 않음
        2. 입력된 단어가 API에 존재하지만, 초성이 일치하지 않음 
        ```    

<br />

7. 게임 종료 및 결과 출력 

    - 정답 검증을 통해 각각 정답/실패에 대한 메시지가 출력된다.
    
    - 정답이면 사용자가 입력한 단어의 자세한 풀이를 출력한다.

    - 오답이면 제시어의 자세한 풀이를 출력한다.

    <br />

    < 결과 출력 형태 >

    - 정답일 경우

        ```
        정답입니다🥳

        <단어 뜻 풀이>
        품사 : 입력 단어의 품사
        정의 : 입력 단어의 정의
        범주 : 입력 단어의 범주
        ```       

    - 오답일 경우

        ```
        실패했어요😭

        이런 단어도 있어요!
        단어 : 제시어의 원래 단어
        품사 : 제시어의 품사
        정의 : 제시어의 정의
        ```

<br/>

## RunningService 로직 설명
🔗 RunningService 상세 문서 (Notion) : https://www.notion.so/2b4645a19c0080d8a6e4caf09a85d021?source=copy_link

<br/>

## 예외처리 상세
- 초성 생성 : 만약 제시어를 불러오는 데 3분을 초과하는 경우, 재시도한다. 

- 사용자 입력 : 사용자가 아무것도 입력하지 않은 경우, 다시 입력하라는 메시지를 표시한다.

<br/>

## 테스트 상세
1. 항상 가~힣 사이의 랜덤한 한글 음절 1개가 생성되는지 확인한다.

2. API에서 랜덤한 두 글자 단어가 불러와지는지 확인한다.

3. API가 빈 배열을 반환화면 다시 랜덤 단어를 얻는다.

4. API에서 불러온 단어로 초성 추출이 잘 되는지 확인한다.

5. 게임이 시작되고 10초 뒤, 20초 뒤에 힌트가 잘 나오는지 확인한다.

6. 제시어의 범주에 아무것도 없을 경우, '일반'이라는 값이 들어가는지 확인한다.

7. 정의 문자열 내부의 태그들이 잘 디코딩되는지 확인한다.

8. 사용자가 오답을 입력할 경우, 오답에 대한 멘트가 나오는지 확인한다.

9. 사용자가 정답을 입력할 경우, 정답에 대한 멘트가 나오는지 확인한다.

10. 제시어 생성 시간이 3분을 넘어갔을 때, 예외 메시지가 뜨는지 확인한다.

11. 사용자가 아무것도 입력하지 않으면, 예외 메시지가 뜨는지 확인한다.
